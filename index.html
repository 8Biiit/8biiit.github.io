<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/header.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/header.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/header.jpg">
  <link rel="mask-icon" href="/images/header.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"8biiit.github.io","root":"/","images":"/images","scheme":"Gemini","version":"8.6.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"order":-2}},"activeClass":"gitalk"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="Everything from life">
<meta property="og:type" content="website">
<meta property="og:title" content="8Biiit&#39;s Blog">
<meta property="og:url" content="http://8biiit.github.io/index.html">
<meta property="og:site_name" content="8Biiit&#39;s Blog">
<meta property="og:description" content="Everything from life">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="8Biiit">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://8biiit.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>8Biiit's Blog</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">8Biiit's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">不抵抗，也不停止飞行</p>
      <img class="custom-logo-image" src="/images/header.jpg" alt="8Biiit's Blog">
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-overview">
            <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">8Biiit</p>
  <div class="site-description" itemprop="description">Everything from life</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/8biiit" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;8biiit" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



          </div>
        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://8biiit.github.io/2021/04/12/%E6%9F%90%E4%B8%89%E6%B6%88%E6%B8%B8%E6%88%8F%E9%80%86%E5%90%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="8Biiit">
      <meta itemprop="description" content="Everything from life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="8Biiit's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/04/12/%E6%9F%90%E4%B8%89%E6%B6%88%E6%B8%B8%E6%88%8F%E9%80%86%E5%90%91/" class="post-title-link" itemprop="url">某三消游戏逆向(1)——lua脚本解密</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-12 15:49:33" itemprop="dateCreated datePublished" datetime="2021-04-12T15:49:33+08:00">2021-04-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-08-02 11:22:32" itemprop="dateModified" datetime="2021-08-02T11:22:32+08:00">2021-08-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%80%86%E5%90%91/" itemprop="url" rel="index"><span itemprop="name">逆向</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="文件分析"><a href="#文件分析" class="headerlink" title="文件分析"></a>文件分析</h1><h2 id="确定分析对象"><a href="#确定分析对象" class="headerlink" title="确定分析对象"></a>确定分析对象</h2><p>解压apk安装包，进入./lib目录，都是.so的底层库。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2021/04/12/%E6%9F%90%E4%B8%89%E6%B6%88%E6%B8%B8%E6%88%8F%E9%80%86%E5%90%91/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://8biiit.github.io/2021/03/10/Mac10-14%E7%BC%96%E8%AF%91Lineage16-0-for-Xiaomi6-sagit/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="8Biiit">
      <meta itemprop="description" content="Everything from life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="8Biiit's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/03/10/Mac10-14%E7%BC%96%E8%AF%91Lineage16-0-for-Xiaomi6-sagit/" class="post-title-link" itemprop="url">Mac10.14编译Lineage16.0 for Xiaomi6(sagit)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-10 17:05:21" itemprop="dateCreated datePublished" datetime="2021-03-10T17:05:21+08:00">2021-03-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-30 11:09:49" itemprop="dateModified" datetime="2021-04-30T11:09:49+08:00">2021-04-30</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>由于内网服务器各种不方便，最后选择购入1T的移动SSD在本地编译了。虚拟机的话需要本机至少24G内存，条件不满足；而且安卓代码对MAC的支持比较友好了，所以决定就在mac环境下编译啦</p>
<p>lineage16.0不再支持小米6，因此换成17.1 ：<a target="_blank" rel="noopener" href="https://www.lineageoslog.com/16.0/sagit">https://www.lineageoslog.com/16.0/sagit</a></p>
<h1 id="准备磁盘"><a href="#准备磁盘" class="headerlink" title="准备磁盘"></a>准备磁盘</h1><p>三星T5 SSD 使用MAC的磁盘工具重新挂载后抹除 ，使磁盘<font color="red">可写</font>，可<font color="red">区分大小写</font></p>
<h1 id="repo工具下载及添加到环境变量"><a href="#repo工具下载及添加到环境变量" class="headerlink" title="repo工具下载及添加到环境变量"></a>repo工具下载及添加到环境变量</h1><p>使用<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/lineageOS/">清华的镜像源</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">​</span><br><span class="line">mkdir ~/bin</span><br><span class="line">​</span><br><span class="line">#本地下载repo，使用jumper的上传下到服务器上</span><br><span class="line">curl https://mirrors.tuna.tsinghua.edu.cn/git/git-repo &gt; /bin/repo/</span><br><span class="line">chmod a+x ~/bin/repo</span><br><span class="line">​</span><br><span class="line">export REPO_URL=&#x27;https://mirrors.tuna.tsinghua.edu.cn/git/git-repo/&#x27;</span><br><span class="line">export PATH=~/bin:$PATH</span><br></pre></td></tr></table></figure>
<h1 id="代码同步"><a href="#代码同步" class="headerlink" title="代码同步"></a>代码同步</h1><ol>
<li>创建一个大小写敏感的分区,或者创建一个大小写敏感的镜像文件,用来存放 同步下来的源码.</li>
<li>进入存放源码的路径</li>
<li>在当前路径下初始化源码仓库:</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repo init -u https://mirrors.tuna.tsinghua.edu.cn/git/lineageOS/LineageOS/android.git -b lineage-16.0</span><br></pre></td></tr></table></figure>

<p>打开<code>.repo/manifest.xml</code>，将</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;remote name=&quot;github&quot; </span><br><span class="line">        fetch=&quot;..&quot; </span><br><span class="line">        review=&quot;review.lineageos.org&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>改成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;remote name=&quot;github&quot; </span><br><span class="line">        fetch=&quot;https://github.com/&quot; /&gt; </span><br><span class="line">&lt;remote name=&quot;lineage&quot; </span><br><span class="line">        fetch=&quot;https://mirrors.tuna.tsinghua.edu.cn/git/lineageOS/&quot; </span><br><span class="line">        review=&quot;review.lineageos.org&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>将</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;remote name=&quot;aosp&quot; </span><br><span class="line">        fetch=&quot;https://android.googlesource.com&quot;</span><br></pre></td></tr></table></figure>
<p>改成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;remote name=&quot;aosp&quot; </span><br><span class="line">        fetch=&quot;https://mirrors.tuna.tsinghua.edu.cn/git/AOSP&quot;</span><br></pre></td></tr></table></figure>
<p>将</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;default revision=&quot;...&quot; </span><br><span class="line">         remote=&quot;github&quot;</span><br></pre></td></tr></table></figure>
<p>改成</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;default revision=&quot;...&quot; </span><br><span class="line">         remote=&quot;lineage&quot;</span><br></pre></td></tr></table></figure>

<h2 id="同步源码树（以后只需执行这条命令来同步）："><a href="#同步源码树（以后只需执行这条命令来同步）：" class="headerlink" title="同步源码树（以后只需执行这条命令来同步）："></a>同步源码树（以后只需执行这条命令来同步）：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">repo sync -j8 -c</span><br><span class="line">​</span><br><span class="line">#若出现error: Exited sync due to fetch errors</span><br><span class="line">#使用</span><br><span class="line">repo sync -j8 -f --force-sync</span><br><span class="line">​</span><br><span class="line">#若出现bundle错误</span><br><span class="line">#使用</span><br><span class="line">repo sync -j8 --no-clone-bundle</span><br></pre></td></tr></table></figure>
<h2 id="快速同步"><a href="#快速同步" class="headerlink" title="快速同步"></a>快速同步</h2><p>或直接下载repo包，解压后cd到lineage目录 直接执行<code>repo sync -l</code>提取源码</p>
<h1 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">brew install findutils</span><br><span class="line">brew install gpg</span><br><span class="line">brew install Imagemagick</span><br><span class="line">​</span><br><span class="line">#sed</span><br><span class="line">brew install gnu-sed   </span><br><span class="line">export PATH=/usr/local/opt/findutils/libexec/gnubin:/usr/local/opt/gnu-sed/libexec/gnubin:$PATH</span><br><span class="line">​</span><br><span class="line">#安装 Xcode 命令行工具：</span><br><span class="line">xcode-select --install</span><br><span class="line">​</span><br><span class="line">#通过 macports.org 安装 MacPorts。</span><br><span class="line">#https://www.macports.org/install.php</span><br><span class="line">​</span><br><span class="line">export PATH=/opt/local/bin:$PATH</span><br><span class="line">​</span><br><span class="line">#通过 MacPorts 获取 Make、Git 和 GPG 程序包：</span><br><span class="line">sudo port -d sync</span><br><span class="line">POSIXLY_CORRECT=1 sudo port install gmake libsdl git gnupg</span><br><span class="line">​</span><br><span class="line">#设置文件描述符数量上限</span><br><span class="line">vim ~/.bash_profile</span><br><span class="line">#添加此行</span><br><span class="line"># set the number of open files to be 1024</span><br><span class="line">ulimit -S -n 1024</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line">#优化编译环境</span><br><span class="line">brew install Ccache</span><br><span class="line">​</span><br><span class="line">在源代码树的根目录下执行以下命令：</span><br><span class="line">export USE_CCACHE=1</span><br><span class="line">export CCACHE_DIR=/Volumes/Samsung_T5/android/build_cache/.ccache</span><br><span class="line">export CCACHE_COMPRESS=1</span><br><span class="line">ccache -M 100G</span><br><span class="line">​</span><br><span class="line">#error</span><br><span class="line">export ALLOW_MISSING_DEPENDENCIES=true</span><br></pre></td></tr></table></figure>
<h2 id="idea源码阅读"><a href="#idea源码阅读" class="headerlink" title="idea源码阅读"></a>idea源码阅读</h2><p>源码根目录执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mmma development/tools/idegen/</span><br><span class="line">#在/out/host/darwin-x86/framework下生成idegen.jar</span><br></pre></td></tr></table></figure>

<h3 id="问题与解决"><a href="#问题与解决" class="headerlink" title="问题与解决"></a>问题与解决</h3><p>出现error 缺少macos10.14的sdk，到<a target="_blank" rel="noopener" href="https://github.com/phracker/MacOSX-SDKs/releases/tag/10.15">https://github.com/phracker/MacOSX-SDKs/releases/tag/10.15</a> 下载 ,放到/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs下。</p>
<p>出现error:device/xiaomi/sagit/rro_overlays/SagitWifiOverlay/Android.bp:1:1: unrecognized module type “runtime_resource_overlay”，把/device/xiaomi/sagit/rro_overlays/SagitWifiOverlay 目录删除。</p>
<p>遇到</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install error：python@3.9: undefined method `on_macos&#x27; for #&lt;PourBottleCheck:0x00007f86e80a3220&gt;</span><br></pre></td></tr></table></figure>
<p>执行 <code>brew update -v</code></p>
<p>运行无误生成  out/host/darwin-x86/framework/idegen.jar</p>
<h3 id="执行"><a href="#执行" class="headerlink" title="执行"></a>执行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd croot</span><br><span class="line">​</span><br><span class="line">./development/tools/idegen/idegen.sh</span><br></pre></td></tr></table></figure>
<p>会在源代码根目录生成下列文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 用于IntelliJ IDEA的项目配置文件</span><br><span class="line">android.ipr</span><br><span class="line">android.iml</span><br><span class="line">​</span><br><span class="line">// 用于Eclipse的项目配置文件</span><br><span class="line">.classpath</span><br></pre></td></tr></table></figure>
<p>使用IntelliJ IDEA，则打开工程，浏览选择刚才生成的android.ipr文件即可。</p>
<h1 id="xiaomi6-vendor包"><a href="#xiaomi6-vendor包" class="headerlink" title="xiaomi6 vendor包"></a>xiaomi6 vendor包</h1><p><a target="_blank" rel="noopener" href="https://github.com/rim99/android_proprietary_vendor_xiaomi_sagit">android_proprietary_vendor_xiaomi_sagit</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/MoKee/android_vendor_xiaomi_msm8998-common">android_vendor_xiaomi_msm8998-common</a></p>
<p>放到vendor/xiaomi/ 目录下 目录名分别为 msm8998-common 和sagit<br><a target="_blank" rel="noopener" href="https://wiki.lineageos.org/devices/dipper/build#extract-proprietary-blobs">https://wiki.lineageos.org/devices/dipper/build#extract-proprietary-blobs</a></p>
<p><a target="_blank" rel="noopener" href="https://wiki.lineageos.org/extracting_blobs_from_zips.html">从设备提取</a></p>
<h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><p>修改.repo/local_manifest/roomservice.xml ,增加以下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;project name=&quot;LineageOS/android_device_xiaomi_sagit&quot; path=&quot;device/xiaomi/sagit&quot; remote=&quot;github&quot; /&gt;</span><br><span class="line">&lt;project name=&quot;LineageOS/android_device_xiaomi_msm8998-common&quot; path=&quot;device/xiaomi/msm8998-common&quot; remote=&quot;github&quot; /&gt;</span><br><span class="line">&lt;project name=&quot;LineageOS/android_kernel_xiaomi_msm8998&quot; path=&quot;kernel/xiaomi/msm8998&quot; remote=&quot;github&quot; /&gt;</span><br><span class="line">&lt;project name=&quot;xiaomi-msm8998/vendor_xiaomi&quot; path=&quot;vendor/xiaomi&quot; remote=&quot;github&quot;  /&gt;</span><br></pre></td></tr></table></figure>
<p>再<code>repo sync</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">source build/envsetup.sh</span><br><span class="line">​</span><br><span class="line">breakfast sagit</span><br><span class="line">​</span><br><span class="line">croot</span><br><span class="line">​</span><br><span class="line">brunch sagit </span><br></pre></td></tr></table></figure>
<p>如果出现python相关的错，记得把python切换到python2</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://8biiit.github.io/2021/02/07/%E4%BD%BF%E7%94%A8yolo3-tf2%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="8Biiit">
      <meta itemprop="description" content="Everything from life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="8Biiit's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/02/07/%E4%BD%BF%E7%94%A8yolo3-tf2%E8%AE%AD%E7%BB%83%E8%87%AA%E5%B7%B1%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86/" class="post-title-link" itemprop="url">使用yolo3-tf2训练自己的数据集</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-02-07 17:55:33" itemprop="dateCreated datePublished" datetime="2021-02-07T17:55:33+08:00">2021-02-07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-19 18:05:08" itemprop="dateModified" datetime="2021-02-19T18:05:08+08:00">2021-02-19</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CV/" itemprop="url" rel="index"><span itemprop="name">CV</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="配置环境"><a href="#配置环境" class="headerlink" title="配置环境"></a>配置环境</h1><h2 id="下载yolo工程"><a href="#下载yolo工程" class="headerlink" title="下载yolo工程"></a>下载yolo工程</h2><p>yolov3-tf2地址：<a target="_blank" rel="noopener" href="https://github.com/zzh8829/yolov3-tf2">https://github.com/zzh8829/yolov3-tf2</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git clone  https://github.com/zzh8829/yolov3-tf2 yolov3-tf2</span><br><span class="line">cd yolov3-tf2</span><br></pre></td></tr></table></figure>

<h2 id="建立conda环境"><a href="#建立conda环境" class="headerlink" title="建立conda环境"></a>建立conda环境</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Tensorflow CPU</span><br><span class="line">conda env create -f conda-cpu.yml</span><br><span class="line">conda activate yolov3-tf2-cpu</span><br><span class="line">​</span><br><span class="line"># Tensorflow GPU</span><br><span class="line">conda env create -f conda-gpu.yml</span><br><span class="line">conda activate yolov3-tf2-gpu</span><br></pre></td></tr></table></figure>

<h2 id="下载权重文件并验证"><a href="#下载权重文件并验证" class="headerlink" title="下载权重文件并验证"></a>下载权重文件并验证</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://pjreddie.com/media/files/yolov3.weights -O data/yolov3.weights</span><br><span class="line">python convert.py</span><br><span class="line">python detect.py --image ./data/meme.jpg # Sanity check</span><br></pre></td></tr></table></figure>

<h2 id="制作VOC数据集"><a href="#制作VOC数据集" class="headerlink" title="制作VOC数据集"></a>制作VOC数据集</h2><p>目录：</p>
<ul>
<li>VOC<ul>
<li>Annotations #存放xml文件，可使用LabelImg生成        </li>
<li>JPEGImages #存放图片</li>
<li>ImageSets  <ul>
<li>Main<ul>
<li>test.txt    </li>
<li>train.txt    </li>
<li>trainval.txt    </li>
<li>val.txt</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>执行python make.py 在Main 下生成四个txt</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding：utf-8 -*-</span><br><span class="line">​</span><br><span class="line">import os  </span><br><span class="line">import random  </span><br><span class="line">​</span><br><span class="line">trainval_percent = 0.6    # 自己设定（训练集+验证集）所占（训练集+验证集+测试集）的比重  </span><br><span class="line">train_percent = 0.7       # 自己设定（训练集）所占（训练集+验证集）的比重</span><br><span class="line">xmlfilepath = &#x27;Annotations&#x27;     #注意自己地址是否正确</span><br><span class="line">txtsavepath = &#x27;ImageSets/Main&#x27;   #注意自己地址是否正确</span><br><span class="line">total_xml = os.listdir(xmlfilepath)  </span><br><span class="line">​</span><br><span class="line">num = len(total_xml)  </span><br><span class="line">print(num)</span><br><span class="line">list = range(num)  </span><br><span class="line">tv = int(num*trainval_percent)  </span><br><span class="line">tr = int(tv*train_percent)  </span><br><span class="line">trainval = random.sample(list,tv)  </span><br><span class="line">train = random.sample(trainval,tr)  </span><br><span class="line">​</span><br><span class="line">ftrainval = open(&#x27;ImageSets/Main/trainval.txt&#x27;, &#x27;w&#x27;)</span><br><span class="line">ftest = open(&#x27;ImageSets/Main/test.txt&#x27;, &#x27;w&#x27;)</span><br><span class="line">ftrain = open(&#x27;ImageSets/Main/train.txt&#x27;, &#x27;w&#x27;)</span><br><span class="line">fval = open(&#x27;ImageSets/Main/val.txt&#x27;, &#x27;w&#x27;)</span><br><span class="line">​</span><br><span class="line">for i in list:  </span><br><span class="line">    name = total_xml[i][:-4]+&#x27;\n&#x27;  </span><br><span class="line">    #print(name)</span><br><span class="line">    if i in trainval:  </span><br><span class="line">        ftrainval.write(name)  </span><br><span class="line">        if i in train:  </span><br><span class="line">            ftrain.write(name)  </span><br><span class="line">        else:  </span><br><span class="line">            fval.write(name)  </span><br><span class="line">    else:  </span><br><span class="line">        ftest.write(name)  </span><br><span class="line">​</span><br><span class="line">ftrainval.close()  </span><br><span class="line">ftrain.close()  </span><br><span class="line">fval.close()  </span><br><span class="line">ftest.close()</span><br><span class="line">print(&#x27;Done&#x27;)</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<h2 id="建立标签-names文件"><a href="#建立标签-names文件" class="headerlink" title="建立标签.names文件"></a>建立标签.names文件</h2><p>在data文件夹下，写入的就是自己要训练的类别</p>
<h2 id="生成tfrecord文件"><a href="#生成tfrecord文件" class="headerlink" title="生成tfrecord文件"></a>生成tfrecord文件</h2><p>训练集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python tools/voc2012.py \</span><br><span class="line">  --data_dir &#x27;./data/voc-5h&#x27; \</span><br><span class="line">  --split train \</span><br><span class="line">  --output_file ./data/voc5h_train.tfrecord \</span><br><span class="line">  --classes ./data/voc-5h.names</span><br></pre></td></tr></table></figure>
<p>测试集</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python tools/voc2012.py \</span><br><span class="line">  --data_dir &#x27;./data/voc-5h&#x27; \</span><br><span class="line">  --split val \</span><br><span class="line">  --output_file ./data/voc5h_val.tfrecord \</span><br><span class="line">  --classes ./data/voc-5h.names</span><br></pre></td></tr></table></figure>

<h1 id="训练"><a href="#训练" class="headerlink" title="训练"></a>训练</h1><h2 id="进行迁移训练"><a href="#进行迁移训练" class="headerlink" title="进行迁移训练"></a>进行迁移训练</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">python train.py \</span><br><span class="line">  --dataset ./data/voc5h_train.tfrecord \</span><br><span class="line">  --val_dataset ./data/voc5h_val.tfrecord \</span><br><span class="line">  --classes ./data/voc-5h.names \</span><br><span class="line">  --num_classes 181 \</span><br><span class="line">  --mode fit --transfer darknet \</span><br><span class="line">  --batch_size 16 \</span><br><span class="line">  --epochs 10 \</span><br><span class="line">  --weights ./checkpoints/yolov3.tf \</span><br><span class="line">  --weights_num_classes 80</span><br></pre></td></tr></table></figure>

<h2 id="使用随机权重进行训练"><a href="#使用随机权重进行训练" class="headerlink" title="使用随机权重进行训练"></a>使用随机权重进行训练</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">python train.py \</span><br><span class="line">  --dataset ./data/voc5h_train.tfrecord \</span><br><span class="line">  --val_dataset ./data/voc5h_val.tfrecord \</span><br><span class="line">  --classes ./data/voc-5h.names \</span><br><span class="line">  --num_classes 181 \</span><br><span class="line">  --mode fit --transfer none \</span><br><span class="line">  --batch_size 16 \</span><br><span class="line">  --epochs 50 \</span><br></pre></td></tr></table></figure>

<h1 id="模型测试"><a href="#模型测试" class="headerlink" title="模型测试"></a>模型测试</h1><h2 id="从图像中检测"><a href="#从图像中检测" class="headerlink" title="从图像中检测"></a>从图像中检测</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python detect.py \</span><br><span class="line">  --classes ./data/voc-5h.names \</span><br><span class="line">  --num_classes 181 \</span><br><span class="line">  --weights ./checkpoints/yolov3_train_5.tf \</span><br><span class="line">  --image ./data/street.jpg</span><br></pre></td></tr></table></figure>

<h2 id="从验证集中检测"><a href="#从验证集中检测" class="headerlink" title="从验证集中检测"></a>从验证集中检测</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python detect.py \</span><br><span class="line">  --classes ./data/voc-5h.names \</span><br><span class="line">  --num_classes 181 \</span><br><span class="line">  --weights ./checkpoints/yolov3_train_5.tf \</span><br><span class="line">  --tfrecord ./data/voc5h_val.tfrecord</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://8biiit.github.io/2021/01/29/%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="8Biiit">
      <meta itemprop="description" content="Everything from life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="8Biiit's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/01/29/%E5%9B%BE%E7%89%87%E5%A4%84%E7%90%86/" class="post-title-link" itemprop="url">图片处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-01-29 11:36:55" itemprop="dateCreated datePublished" datetime="2021-01-29T11:36:55+08:00">2021-01-29</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-25 15:49:34" itemprop="dateModified" datetime="2021-04-25T15:49:34+08:00">2021-04-25</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/CV/" itemprop="url" rel="index"><span itemprop="name">CV</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="OpenCV-Python方法"><a href="#OpenCV-Python方法" class="headerlink" title="OpenCV-Python方法"></a>OpenCV-Python方法</h1><p>教程：<a target="_blank" rel="noopener" href="https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_tutorials.html">https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_tutorials.html</a></p>
<p>opencv以BGR模式加载图片。</p>
<p>使用需 <code>import cv2</code></p>
<h2 id="读写展示图片"><a href="#读写展示图片" class="headerlink" title="读写展示图片"></a>读写展示图片</h2><h3 id="读本地图片"><a href="#读本地图片" class="headerlink" title="读本地图片"></a>读本地图片</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cv2.imread(filepath,flags)</span><br><span class="line">​</span><br><span class="line">#参数一：工作路径or完整路径  参数二：读取这幅图片方式，可省略</span><br><span class="line">#参数二：</span><br><span class="line">#cv2.IMREAD_COLOR：默认参数，读入一副彩色图片，忽略alpha通道，实际取值为1</span><br><span class="line">#cv2.IMREAD_GRAYSCALE：读入灰度图片，实际取值为0</span><br><span class="line">#cv2.IMREAD_UNCHANGED：顾名思义，读入完整图片，包括alpha通道</span><br><span class="line">​</span><br><span class="line">exp:</span><br><span class="line">#读取工作路径下彩色图片</span><br><span class="line">cv2.imread(&quot;1.jpg&quot;)</span><br><span class="line">​</span><br><span class="line">#读取完整路径下灰度图片</span><br><span class="line">cv2.imread(&quot;/Users/mabelguo/1.jpg&quot;,0)</span><br></pre></td></tr></table></figure>
<h3 id="写图片到本地"><a href="#写图片到本地" class="headerlink" title="写图片到本地"></a>写图片到本地</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cv2.imwrite(filepath,img)</span><br><span class="line">​</span><br><span class="line">#若保存为png，则保留alpha通道；保存为jpg，丢失alpha通道</span><br><span class="line">​</span><br><span class="line">exp:</span><br><span class="line">cv2.imwrite(&quot;1.png&quot;,img)</span><br><span class="line">````</span><br><span class="line">### 窗体展示图片</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>#展示窗体，窗口自适应图片的大小<br>cv2.imshow(windowName,img)<br>#参数一：窗体标题 参数二：图像<br>​<br>​<br>#等待键盘输入，否则窗体一闪而过<br>cv2.waitKey(0)<br>#销毁所有窗口<br>cv2.destroyAllWindows()<br>​<br>#可调整大小窗口<br>cv2.namedWindow(windowName,flag)<br>#如果我们想放大缩小窗口，必须单独用cv2.namedWindow(),并通过flag参数指定窗口模式为cv2.WINDOW_NORMAL,默认为cv2.WINDOW_AUTOSIZE.<br>​<br>flag:<br>窗口大小可以改变：   cv2.WINDOW_NORMAL , cv2.WINDOW_GUI_NORMAL<br>窗口大小不可以改变： cv2.WINDOW_AUTOSIZE<br>窗口大小自适应比例： cv2.WINDOW_FREERATIO<br>窗口大小保持比例：   cv2.WINDOW_KEEPRATIO<br>显示色彩变成暗色：   cv2.WINDOW_GUI_EXPANDED<br>​<br>exp:<br>cv2.namedWindow(“lena”,0)<br>cv2.imshow(“lena”,img)<br>cv2.waitKey(0)<br>cv2.destroyAllWindows()</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 图像标注</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>#画直线<br>cv2.line()<br>cv2.line(img, pt1, pt2, color[, thickness[, lineType[, shift]]])<br>​<br>img，背景图<br>pt1，直线起点坐标<br>pt2，直线终点坐标<br>color，当前绘画的颜色。如在BGR模式下，传递(255,0,0)表示蓝色画笔。灰度图下，只需要传递亮度值即可。<br>thickness，画笔的粗细，线宽。若是-1表示画封闭图像，如填充的圆。默认值是1.<br>​<br>​<br>#画圈<br>cv2.circle()<br>cv2.circle(img, center, radius, color[, thickness[, lineType[, shift]]])<br>​<br>img，背景图<br>center，圆心<br>radius，半径<br>color，颜色<br>thickness，线粗细<br>​</p>
<p>#画矩形<br>cv2.rectangle()<br>cv2.rectangle(img, pt1, pt2, color[, thickness[, lineType[, shift]]])<br>​</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 图片常见预处理</span><br><span class="line">### 利用numpy创建一张新的图片</span><br><span class="line">OpenCV的基础数据类型为numpy.ndarray，numpy.ndarray中的每个元素的dtype应该为numpy.uint8。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>import cv2<br>import numpy as np<br>​<br>#创建三通道黑色图片<br>img = np.zeros([w, h, 3], np.uint8)<br>​<br>#创建三通道白色图片<br>img = np.zeros([w, h, 3], np.uint8) + 255<br>​<br>#创建四通道黑色透明图片（需保存为png才能看到透明度）<br>img = np.zeros([w, h, 4], np.uint8)<br>​<br>#由于opencv 颜色通道顺序为BGR<br>蓝色通道为：img[:, :, 0]<br>绿色通道为：img[:, :, 1]<br>红色通道为：img[:, :, 2]<br>透明度通道为：img[:, :, 3] </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">### 颜色空间转换</span><br></pre></td></tr></table></figure>
<p>image = cv2.imread(“1.png”)<br>​<br>#从BGR转到HSV颜色空间<br>image_hsv = cv2.cvtColor(image,cv2.COLOR_BGR2HSV)<br>​<br>#从彩色图转灰度图<br>image_ = cv2.cvtColor(image,cv2.COLOR_BGR2GRAY)<br>​<br>#从BGR转到RGB颜色空间<br>image_hsv = cv2.cvtColor(image,cv2.COLOR_BGR2RGB)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">### 图像去噪</span><br></pre></td></tr></table></figure>
<p>#高斯滤波<br>cv2.GaussianBlur()<br>​<br>cv2.GaussianBlur(src, ksize, sigmaX[, dst[, sigmaY[, borderType]]])<br>@param: src: nparray<br>          input image.<br>@param: ksize: (int,int)<br>          Gaussian kernel size. ksize.width and ksize.height can differ<br>          but they both must be positive and odd.<br>          Or, they can be zero’s and then they are computed from sigma* .<br>@param: sigmaX: float<br>          Gaussian kernel standard deviation in X direction.<br>@param: sigmaY: float<br>          Gaussian kernel standard deviation in Y direction;<br>          if sigmaY is zero, it is set to be equal to sigmaX,<br>          if both sigmas are zeros, they are computed from ksize.width and ksize.height.<br>          To fully control the result,<br>          it is recommended to specify all of ksize, sigmaX, and sigmaY.</p>
<p>#exp<br>#可以自己构建高斯核<br>cv2.getGaussianKernel()<br>#也可以直接做模糊<br>blur = cv2.GaussianBlur(img, (6, 6), 1, 0)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">### 二值化</span><br><span class="line">cv2.threshold()</span><br><span class="line"></span><br><span class="line">函数原型：</span><br><span class="line"></span><br><span class="line">cv2.threshold (src, thresh, maxval, type)</span><br><span class="line"></span><br><span class="line">src：源图片，必须是单通道</span><br><span class="line"></span><br><span class="line">thresh：阈值，取值范围0～255</span><br><span class="line"></span><br><span class="line">maxval：填充色，取值范围0～255</span><br><span class="line"></span><br><span class="line">type：阈值类型，见下表</span><br><span class="line"></span><br><span class="line">| 阈值 | 小于阈值的像素点| 大于阈值的像素点| </span><br><span class="line">| :--------:   | :----- | :----  |</span><br><span class="line">| 0| 置0| 置填充色| </span><br><span class="line">| 1| 置填充色| 置0| </span><br><span class="line">| 2| 保持原色| 置灰色| </span><br><span class="line">| 3| 置0| 保持原色| </span><br><span class="line">| 4| 保持原色| 置0| </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ret, binary = cv2.threshold(gray, 80, 255, cv2.THRESH_BINARY_INV) </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">## 形态学处理</span><br><span class="line">### 腐蚀</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>import cv2<br>import numpy as np<br>​<br>img = cv2.imread(‘j.png’,0)<br>kernel = np.ones((5,5), np.uint8)<br>erosion = cv2.erode(img,kernel,iterations=1)<br>​</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 膨胀</span><br><span class="line"></span><br><span class="line">把分隔对象连起来很有用</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>dilation = cv2.dilate(img,kernel,iterations=1)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">### 开运算：先腐蚀后膨胀</span><br><span class="line"></span><br><span class="line">cv2.morphologyEx()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>opening = cv2.morphologyEx(img,cv2.MORPH_OPEN,kernel)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">### 闭运算：先膨胀后腐蚀</span><br><span class="line"></span><br><span class="line">用来关闭前景对象里的小洞或小黑点很有用</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>closing = cv2.morphologyEx(img,cv2.MORPH_CLOSE,kernel)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">### 形态梯度：物体的轮廓</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>gradient = cv2.morphologyEx(img,cv2.MORPH_GRADIENT,kernel)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 进阶方法</span><br><span class="line">### 查找、绘制轮廓函数</span><br><span class="line">cv2.findContours()</span><br><span class="line"></span><br><span class="line">函数原型：</span><br><span class="line"></span><br><span class="line">cv2.findContours(image, mode, method[, contours[, hierarchy[, offset ]]])</span><br><span class="line"></span><br><span class="line">| image| 源图像，一个8位单通道图像| </span><br><span class="line">|------------- | -------------|</span><br><span class="line">| contours| 检测到的轮廓| </span><br><span class="line">| hierarchy| 轮廓级别信息。Hierarchy为可选输出变量| </span><br><span class="line">| mode| 轮廓检索模式| </span><br><span class="line">| method| 轮廓近似法| </span><br><span class="line">| offset| 每个轮廓点移动的偏移量，可选参数，cv::Point()类型| </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>binary, contours, hierarchy = cv2.findContours(binary, cv2.RETR_TREE, cv2.CHAIN_APPROX_NONE)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">cv2.drawContours()</span><br><span class="line"></span><br><span class="line">函数原型：</span><br><span class="line"></span><br><span class="line">image = cv.drawContours(image, contours, contourIdx, color[, thickness[, lineType[, hierarchy[, maxLevel[, offset]]]]])</span><br><span class="line"></span><br><span class="line">函数参数：</span><br><span class="line"></span><br><span class="line">|image|输入：源图像。单通道或3通道图像。|</span><br><span class="line">|------------- | -------------|</span><br><span class="line">|contours|输入：待绘制的轮廓|</span><br><span class="line">|contourIdx|输入：待绘制的轮廓序号，-1为绘制所有轮廓。|</span><br><span class="line">|color|输入：轮廓颜色|</span><br><span class="line">|thickness|输入：轮廓粗细。int型变量，默认为1，值越大越粗|</span><br><span class="line">|lineType|输入：绘制轮廓的线型。|</span><br><span class="line">|hierarchy|输入：待绘制的轮廓级别。|</span><br><span class="line">|maxLevel|输入：待绘制的轮廓最大级别。|</span><br><span class="line">|method|输入：轮廓近似法|</span><br><span class="line">|offset|输入：每个轮廓点移动的偏移量，可选参数。|</span><br><span class="line"></span><br><span class="line">### 模板检测</span><br><span class="line">cv2.matchTemplate()</span><br><span class="line"></span><br><span class="line">函数原型：</span><br><span class="line"></span><br><span class="line">cv2.matchTemplate(image, templ, method, result=None, mask=None)</span><br><span class="line"></span><br><span class="line">image：待搜索图像</span><br><span class="line"></span><br><span class="line">templ：模板图像</span><br><span class="line"></span><br><span class="line">result：匹配结果</span><br><span class="line"></span><br><span class="line">method：计算匹配程度的方法</span><br><span class="line"></span><br><span class="line">关于匹配方法，使用不同的方法产生的结果的意义可能不太一样，有些返回的值越大表示匹配程度越好，而有些方法返回的值越小表示匹配程度越好。</span><br><span class="line"></span><br><span class="line">关于参数 method：</span><br><span class="line"></span><br><span class="line">CV_TM_SQDIFF 平方差匹配法：该方法采用平方差来进行匹配；最好的匹配值为0；匹配越差，匹配值越大。</span><br><span class="line"></span><br><span class="line">CV_TM_CCORR 相关匹配法：该方法采用乘法操作；数值越大表明匹配程度越好。</span><br><span class="line"></span><br><span class="line">CV_TM_CCOEFF 相关系数匹配法：1表示完美的匹配；-1表示最差的匹配。</span><br><span class="line"></span><br><span class="line">CV_TM_SQDIFF_NORMED 归一化平方差匹配法</span><br><span class="line"></span><br><span class="line">CV_TM_CCORR_NORMED 归一化相关匹配法</span><br><span class="line"></span><br><span class="line">CV_TM_CCOEFF_NORMED 归一化相关系数匹配法</span><br><span class="line"></span><br><span class="line">例子：</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>#导入所需库文件<br>import cv2<br>import numpy as np<br>​<br>#加载原始RGB图像<br>img_rgb = cv2.imread(“photo.jpg”) #创建一个原始图像的灰度版本，所有操作在灰度版本中处理，然后在RGB图像中使用相同坐标还原<br>img_gray = cv2.cvtColor(img_rgb, cv2.COLOR_BGR2GRAY)<br>#加载将要搜索的图像模板<br>template = cv2.imread(‘face.jpg’,0)<br>#记录图像模板的尺寸<br>w, h = template.shape[::-1]<br>​<br>#使用matchTemplate对原始灰度图像和图像模板进行匹配<br>res = cv2.matchTemplate(img_gray,template,cv2.TM_CCOEFF_NORMED)<br>#设定阈值 threshold = 0.7<br>#res大于70%<br>loc = np.where( res &gt;= threshold)<br>​<br>#使用灰度图像中的坐标对原始RGB图像进行标记<br>for pt in zip(*loc[::-1]):<br>  cv2.rectangle(img_rgb, pt, (pt[0] + w, pt[1] + h), (7,249,151), 2)<br>​<br>#显示图像<br>cv2.imshow(‘Detected’,img_rgb)<br>cv2.waitKey(0)<br>cv2.destroyAllWindows()<br>​</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 图片常见统计学处理</span><br><span class="line">### 直方图计算</span><br><span class="line">cv.calcHist()函数</span><br><span class="line"></span><br><span class="line">cv.calcHist（images，channels，mask，histSize，ranges ）</span><br><span class="line"></span><br><span class="line">images：uint8或float32类型的源图像,以方括号传入，如：[img]。</span><br><span class="line"></span><br><span class="line">channels：计算直方图的通道的索引，也以方括号给出。灰度图像，值为[0]。彩色图B/G/R分别传入[0]/[1]/[2]。</span><br><span class="line"></span><br><span class="line">mask：图像掩码。计算整幅图写None。若要查找图像特定区域的直方图，则必须为此创建一个掩码图像并将其作为掩码。</span><br><span class="line"></span><br><span class="line">histSize：也叫bins,子区段数目，如果我们统计0-255每个像素值，bins=256；如果划分区间，比如0-15, 16-31…240-255这样16个区间，bins=16。</span><br><span class="line"></span><br><span class="line">ranges：要计算的像素值范围，一般为[0,256)</span><br><span class="line"></span><br><span class="line">如：hist = cv2.calcHist([img], [0], None, [256], [0, 256])</span><br><span class="line"></span><br><span class="line"># Matplotlib方法</span><br><span class="line">## 绘制直方图</span><br><span class="line">Matplotlib.pyplot.hist()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>import cv2<br>import numpy as np<br>from matplotlib import pyplot as plt<br>​<br>img = cv2.imread(‘home.jpg’,0)<br>plt.hist(img.ravel(),256,[0,256])<br>plt.show()<br>```</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://8biiit.github.io/2021/01/19/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Charles%E8%BF%9B%E8%A1%8CHTTP-HTTPS%E6%8A%93%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="8Biiit">
      <meta itemprop="description" content="Everything from life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="8Biiit's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/01/19/Mac%E4%B8%8B%E4%BD%BF%E7%94%A8Charles%E8%BF%9B%E8%A1%8CHTTP-HTTPS%E6%8A%93%E5%8C%85/" class="post-title-link" itemprop="url">Mac下使用Charles进行HTTP/HTTPS抓包</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-01-19 11:01:20" itemprop="dateCreated datePublished" datetime="2021-01-19T11:01:20+08:00">2021-01-19</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-19 11:24:32" itemprop="dateModified" datetime="2021-02-19T11:24:32+08:00">2021-02-19</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Charles安装与配置"><a href="#Charles安装与配置" class="headerlink" title="Charles安装与配置"></a>Charles安装与配置</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>最新的Charles工具，下载地址：<a target="_blank" rel="noopener" href="https://www.charlesproxy.com/download/">https://www.charlesproxy.com/download/</a></p>
<h2 id="配置代理端口号"><a href="#配置代理端口号" class="headerlink" title="配置代理端口号"></a>配置代理端口号</h2><p>Proxy -&gt; Proxy Settings -&gt; Port，port可以随便指定，这里取8888</p>
<h2 id="配置HTTPS证书"><a href="#配置HTTPS证书" class="headerlink" title="配置HTTPS证书"></a>配置HTTPS证书</h2><h3 id="添加SSL-Proxying"><a href="#添加SSL-Proxying" class="headerlink" title="添加SSL Proxying"></a>添加SSL Proxying</h3><p>Proxy -&gt; SSL Proxying Settings -&gt;勾选“Enable SSL Proxying”，并点击下方的Add，可以这样配置：</p>
<h3 id="安装Charles证书到Mac"><a href="#安装Charles证书到Mac" class="headerlink" title="安装Charles证书到Mac"></a>安装Charles证书到Mac</h3><p>Help–&gt;SSL Proxying→Install Charles Root Certificate </p>
<p>此时会启动“钥匙串访问”APP，搜索框搜所刚安装好的证书，证书名字：Charles Proxy CA。</p>
<p>选中该证书，点击显示简介</p>
<p>更改证书信任权限。更改为始终信任，并关闭窗口输入密码保存</p>
<p>移动复制该证书到“系统”里面</p>
<p>结束！可以抓包了</p>
<h1 id="Android-设置"><a href="#Android-设置" class="headerlink" title="Android 设置"></a>Android 设置</h1><h2 id="Android代理设置"><a href="#Android代理设置" class="headerlink" title="Android代理设置"></a>Android代理设置</h2><p>以小米+lineageOS为例</p>
<p>设置 -&gt; WI-FI -&gt; 网络详情 -&gt; 编辑</p>
<p>配置代理，IP设为电脑的IP，端口输入之前设置的端口（此为8888），点击存储</p>
<p>（mac 查看ip：ifconfig en0 ）</p>
<h2 id="Android-7-0-以下设置"><a href="#Android-7-0-以下设置" class="headerlink" title="Android 7.0 以下设置"></a>Android 7.0 以下设置</h2><p>打开Safari浏览器，访问：<code>chls.pro/ssl</code></p>
<p>手机会提示下载文件，点击安装</p>
<h2 id="Android-7-0-以上设置"><a href="#Android-7-0-以上设置" class="headerlink" title="Android 7.0 以上设置"></a>Android 7.0 以上设置</h2><p>Android 7.0及以上为何不能抓取到Https请求的明文数据？</p>
<p>其实Charles上显示确实抓到了包，但是当我们看抓包的详细数据时会发现报错:<br> “You may need to configure your browser or application to trust the Charles Root Certificate. See SSL Proxying in the Help menu”。</p>
<p>Charles说手机端没有信任Charles的根证书，但是我们手机上已经安装了Charles根证书了，为什么会这样？</p>
<p>原来在Android 7.0(API 24 ) ，有一个名为“Network Security Configuration”的新安全功能。这个新功能的目标是允许开发人员在不修改应用程序代码的情况下自定义他们的网络安全设置。如果应用程序运行的系统版本高于或等于24，并且targetSdkVersion&gt;=24，则只有系统(system)证书才会被信任。所以用户(user)导入的Charles根证书是不被信任的。</p>
<h3 id="方法一：将证书提升为系统证书"><a href="#方法一：将证书提升为系统证书" class="headerlink" title="方法一：将证书提升为系统证书"></a>方法一：将证书提升为系统证书</h3><p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/doctor_who2004/article/details/105718889">android 7.0以上charles https抓包</a></p>
<p>将手机进行Root</p>
<p>将下载的pem证书文件传到到电脑上，并执行以下命令得到证书的md5值</p>
<p><code>openssl x509 -subject_hash_old -in &lt;file_name&gt;</code></p>
<p>第一行： 即为md5值。</p>
<p>将charles-proxy-ssl-proxying-certificate.pem重命名为:<code>&lt;8位md值&gt;.&lt;0&gt;</code>，这里的md5值为上一步得到的。</p>
<p>Android系统根目录下的证书名字格式如下：<code>&lt;8位md值&gt;.&lt;0&gt;</code></p>
<p>将上面步骤产生证书push到手机目录：<code>/system/etc/security/cacerts</code></p>
<p>push中如果遇到错误 例如remount of the / superblock failed: Permission denied或者file only read等。</p>
<p>解决办法:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ adb root</span><br><span class="line">$ adb disable-verity</span><br><span class="line">$ adb reboot</span><br><span class="line">$ adb root</span><br></pre></td></tr></table></figure>

<p>在 设置-&gt;安全-&gt;加密与凭据-&gt;信任的凭据 的系统标签页看到你新加入的证书，将其启用即可顺利抓包</p>
<p>按照系统证书的方法，遇到问题：read-only file system android</p>
<p>尝试adb root ，报错 adbd cannot run as root in production builds 安装adbd Insecure 依然不行</p>
<h3 id="方法二：利用VirtualXposed"><a href="#方法二：利用VirtualXposed" class="headerlink" title="方法二：利用VirtualXposed"></a>方法二：利用VirtualXposed</h3><p>参考：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/162823763">Android 7.0+使用VirtualXposed+Charles进行抓包</a></p>
<p>注意，0.18.2以后的VirtualXposed 不支持32位app</p>
<h1 id="iOS-设置"><a href="#iOS-设置" class="headerlink" title="iOS 设置"></a>iOS 设置</h1><h2 id="iPhone代理设置"><a href="#iPhone代理设置" class="headerlink" title="iPhone代理设置"></a>iPhone代理设置</h2><p>设置→WIFI –&gt;点击Wi-Fi旁边的ⓘ</p>
<p>滑到底部，点击配置代理</p>
<p>配置代理，IP设为电脑的IP，端口输入之前设置的端口（此为8888），点击存储</p>
<p>（mac 查看ip：ifconfig en0 ）</p>
<h2 id="iPhone证书安装"><a href="#iPhone证书安装" class="headerlink" title="iPhone证书安装"></a>iPhone证书安装</h2><p>打开Safari浏览器，访问：chls.pro/ssl，此时电脑上连接提示，点击allow允许</p>
<p>手机会提示下载描述文件，点击允许</p>
<p>安装完成后，点击 设置–&gt;通用→关于本机，下拉到底部，点击证书 信任设置，把刚信任开关打开。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://8biiit.github.io/2020/12/07/iOS%E8%99%9A%E6%8B%9F%E5%AE%9A%E4%BD%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="8Biiit">
      <meta itemprop="description" content="Everything from life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="8Biiit's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/12/07/iOS%E8%99%9A%E6%8B%9F%E5%AE%9A%E4%BD%8D/" class="post-title-link" itemprop="url">iOS虚拟定位</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-12-07 15:04:35" itemprop="dateCreated datePublished" datetime="2020-12-07T15:04:35+08:00">2020-12-07</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-02-19 18:06:08" itemprop="dateModified" datetime="2021-02-19T18:06:08+08:00">2021-02-19</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><ul>
<li>iphone (iOS 14.1)</li>
<li>lightning线</li>
<li>MAC电脑</li>
</ul>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><ul>
<li>下载和iOS版本对应的Developer Disk Image <a target="_blank" rel="noopener" href="https://github.com/xushuduo/Xcode-iOS-Developer-Disk-Image/releases">14.3-4.2</a> 、<a target="_blank" rel="noopener" href="https://github.com/mspvirajpatel/Xcode_Developer_Disk_Images/releases">14.3-11.3</a></li>
<li>安装<a target="_blank" rel="noopener" href="https://github.com/libimobiledevice/libimobiledevice">libimobiledevice</a></li>
</ul>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><ol>
<li>使用lightning线连接手机和电脑</li>
<li>运行<code>ideviceimagemounter</code>命令挂载Developer Disk Image</li>
<li>运行<code>idevicesetlocation</code>命令设置GPS坐标 </li>
<li>使用完成后运行<code>idevicesetlocation reset</code>解除设置</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#example</span><br><span class="line">idevicesetlocation -- 32.036354 118.785575</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://8biiit.github.io/2020/07/15/Mac%E4%B8%8B%E7%BC%96%E8%AF%91V8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="8Biiit">
      <meta itemprop="description" content="Everything from life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="8Biiit's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/07/15/Mac%E4%B8%8B%E7%BC%96%E8%AF%91V8/" class="post-title-link" itemprop="url">Mac下编译V8</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-15 16:26:32" itemprop="dateCreated datePublished" datetime="2020-07-15T16:26:32+08:00">2020-07-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-04-25 16:41:18" itemprop="dateModified" datetime="2021-04-25T16:41:18+08:00">2021-04-25</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Web/" itemprop="url" rel="index"><span itemprop="name">Web</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="下载V8源码"><a href="#下载V8源码" class="headerlink" title="下载V8源码"></a>下载V8源码</h1><p>参考<a target="_blank" rel="noopener" href="https://v8.dev/docs/source-code#using-git">官方手册</a></p>
<p>注意：不要直接从v8仓库使用git clone命令下载代码，这样下载下来的代码是无效的，会缺失很多东西，要使用官方提供的工具depot_tools</p>
<h2 id="安装-depot-tools"><a href="#安装-depot-tools" class="headerlink" title="安装 depot_tools"></a>安装 depot_tools</h2><p>所需的 gn (配置生成工具) 和 nijia (构建工具) 都在这个仓库里。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Clone depot_tools 仓库 </span><br><span class="line">$ git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git</span><br><span class="line"># 导出环境变量</span><br><span class="line">$ export PATH=&quot;$PATH:/path/to/depot_tools&quot;</span><br></pre></td></tr></table></figure>
<h2 id="下载所需依赖"><a href="#下载所需依赖" class="headerlink" title="下载所需依赖"></a>下载所需依赖</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$mkdir v8 &amp;&amp; cd v8</span><br><span class="line"># 配置 v8 仓库</span><br><span class="line">$ gclient config https://chromium.googlesource.com/v8/v8</span><br><span class="line"># 需要科学上网，然后等待很长一段时间...</span><br><span class="line">$ gclient sync</span><br></pre></td></tr></table></figure>
<p>结束后会发现有v8库文件的文件夹</p>
<h2 id="修改mini-SDK"><a href="#修改mini-SDK" class="headerlink" title="修改mini-SDK"></a>修改mini-SDK</h2><p>由于对要求 MAC OSX SDK&gt;10.15，而我的xcode带的是10.12。所以需要修改</p>
<p>查看sdk版本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># Xcode中添加的SDK版本</span><br><span class="line">$xcodebuild -showsdks</span><br></pre></td></tr></table></figure>
<p>v8/build/config/mac/mac_sdk_overrides.gni文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">_sdk_min_from_env = getenv(&quot;FORCE_MAC_SDK_MIN&quot;)</span><br><span class="line">declare_args() &#123;</span><br><span class="line">  # Minimum supported version of the Mac SDK.</span><br><span class="line">  if (_sdk_min_from_env == &quot;&quot;) &#123;</span><br><span class="line">    mac_sdk_min = &quot;10.15&quot; # 将这里修改成了10.12</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    mac_sdk_min = _sdk_min_from_env</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><p>参考<a target="_blank" rel="noopener" href="https://v8.dev/docs/build-gn">官方手册</a></p>
<h2 id="方式一：gm脚本"><a href="#方式一：gm脚本" class="headerlink" title="方式一：gm脚本"></a>方式一：gm脚本</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#配置别名：</span><br><span class="line">$ alias gm=/path/to/v8/tools/dev/gm.py</span><br><span class="line">$ gm x64.release</span><br><span class="line">$ gm x64.release.check</span><br></pre></td></tr></table></figure>
<h2 id="方式二：手动编译"><a href="#方式二：手动编译" class="headerlink" title="方式二：手动编译"></a>方式二：手动编译</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#生成ninja文件</span><br><span class="line">$ gn args out/foo</span><br><span class="line">或指定参数</span><br><span class="line">$ gn gen out/foo --args=&#x27;is_debug=false target_cpu=&quot;x64&quot; v8_target_cpu=&quot;arm64&quot; use_goma=true&#x27;</span><br><span class="line">​</span><br><span class="line">#或使用v8gen脚本</span><br><span class="line">#配置别名：</span><br><span class="line">$ alias v8gen=/path/to/v8/tools/dev/v8gen.py</span><br><span class="line">$ v8gen -b &#x27;V8 Linux64 - debug builder&#x27; -m client.v8 foo</span><br><span class="line">或：</span><br><span class="line">$ v8gen foo</span><br><span class="line">​</span><br><span class="line">$ v8gen x64.release.sample</span><br><span class="line">​</span><br><span class="line">#使用ninja来编译：</span><br><span class="line">$ ninja -C out/foo</span><br><span class="line">如果要在c++中嵌入v8，使用下面的</span><br><span class="line">$ ninja -C out.gn/x64.release.sample v8_monolith</span><br><span class="line">​</span><br></pre></td></tr></table></figure>


<h2 id="替换libtool"><a href="#替换libtool" class="headerlink" title="替换libtool"></a>替换libtool</h2><p>这里我编译出错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[48/1364] LIBTOOL-STATIC obj/libv8_libbase.a</span><br><span class="line">FAILED: obj/libv8_libbase.a</span><br><span class="line">rm -f obj/libv8_libbase.a &amp;&amp; TOOL_VERSION=1594099062 python ../../build/toolchain/mac/filter_libtool.py /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -static -D  -o obj/libv8_libbase.a -filelist obj/libv8_libbase.a.rsp</span><br><span class="line">error: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool: unknown option character `D&#x27; in: -D</span><br><span class="line">Usage: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool -static [-] file [...] [-filelist listfile[,dirname]] [-arch_only arch] [-sacLT] [-no_warning_for_no_symbols]</span><br></pre></td></tr></table></figure>
<p>看样子是xcode的libtool工具出错，将新版本xcode(11.5)里带的libtool拷贝到原来的xcode 的/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool目录下成功解决问题</p>
<h2 id="移除i18n"><a href="#移除i18n" class="headerlink" title="移除i18n"></a>移除i18n</h2><p>遇到报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FAILED: obj/v8_base_without_compiler/js-number-format.o</span><br></pre></td></tr></table></figure>
<p>icu67 移除了 getAllFieldPositions 这个 API，需要后续添加一个 icu67.1 的 patch</p>
<p>因为用不到国际化的模块，将 i18n 从编译选项中移除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 编辑配置</span><br><span class="line">$ gn args out.gn/x64.release.sample</span><br><span class="line"># 增加一行：</span><br><span class="line"># v8_enable_i18n_support = false</span><br><span class="line"># 再次构建</span><br><span class="line">$ ninja -C out.gn/x64.release.sample v8_monolith</span><br></pre></td></tr></table></figure>
<h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p>编译一下 samples/hello-world.cc</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ g++ samples/hello-world.cc -o hello-world \</span><br><span class="line">-I. -I./include \</span><br><span class="line">-L./out.gn/x64.release.sample/obj -lv8_monolith \</span><br><span class="line">-std=c++11</span><br></pre></td></tr></table></figure>
<p>执行一下，如果有如下输出就是编译成功了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ./hello-world</span><br><span class="line">&#x27;&#x27;&#x27;</span><br><span class="line">Hello, World!</span><br><span class="line">3 + 4 = 7</span><br></pre></td></tr></table></figure>
<h1 id="编译引用v8库的-cc文件"><a href="#编译引用v8库的-cc文件" class="headerlink" title="编译引用v8库的.cc文件"></a>编译引用v8库的.cc文件</h1><p>G++命令</p>
<p>sample：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -I. -Iinclude samples/hello-world.cc -o hello_world -lv8_monolith -Lout.gn/x64.release.sample/obj/ -pthread -std=c++0x</span><br></pre></td></tr></table></figure>
<p>命令解释：</p>
<p>-std= 决定使用的语言标准，当编译C和C++的时候该选择支持配置。 上述命令中的<code>c++0x</code>表示： 语言标准使用即将发布的ISO c++ 0x标准的工作草案。此选项支持可能包含在c++ 0x中的实验性特性。工作草案在不断地变化，如果GCC的未来版本不属于c++ 0x标准，那么由这个标志启用的任何特性都可能被删除。 更多标准请参考：g++</p>
<p>-pthread 使用POSIX线程库添加对多线程的支持。此选项为预处理器和链接器设置标志。它不影响编译器生成的目标代码的线程安全性，也不影响与其提供的库的线程安全性。这些是特定于HP-UX的标志。 </p>
<p>-I dir 将目录dir添加到要搜索头文件的目录列表中。在系统标准包含目录之前，搜索由**-I*<em>指定的目录。如果目录</em>dir<em>是标准的系统包含目录，则忽略该选项，以确保不会破坏系统目录的默认搜索顺序和对系统头文件的特殊处理。如果</em>dir*以”=”开头，则”=”将被sysroot前缀替换。 </p>
<p>-o file 指定输出文件。这与将file指定为cpp的第二个非选项参数相同。gcc 对第二个非选项参数的有另一种解释，因此必须使用-o指定输出文件</p>
<p> -llibrary -l library 链接时搜索名为library的库。(第二种指定库文件的方式仅适用于POSIX遵从性，不建议使用。) 在命令中编写这个选项的位置会有所不同;链接器按照指定的顺序搜索和处理库和目标文件。因此,<code>foo.o -lz bar.o</code>是在文件foo.o之后搜索库z。但在bar.o之前。如果bar.o是引用到了z库中的函数，这些函数是不能被加载。 链接器搜索库的标准目录列表，实际上是一个名为<code>liblibrary.a</code>的文件。然后链接器使用这个文件，就好像它是通过名称精确指定的一样。 </p>
<p>搜索的目录包括几个标准系统目录，以及您使用-L指定的任何目录。 通常以这种方式找到的文件是库文件——其成员是目标文件的归档文件。链接器通过扫描成员来处理存档文件，这些成员定义了到目前为止已经引用但尚未定义的符号。但是，如果找到的文件是一个普通的对象文件，则以通常的方式链接它。</p>
<p> -Ldir 添加<code>dir</code>目录到搜索目录列表中去供<code>-l</code>使用</p>
<h1 id="交叉编译-V8-for-Raspberry-Pi"><a href="#交叉编译-V8-for-Raspberry-Pi" class="headerlink" title="交叉编译 V8 for Raspberry Pi"></a>交叉编译 V8 for Raspberry Pi</h1><h2 id="下载toolchain-for-RPi-on-MAC"><a href="#下载toolchain-for-RPi-on-MAC" class="headerlink" title="下载toolchain for RPi on MAC"></a>下载<a target="_blank" rel="noopener" href="https://github.com/MikeMitterer/xc-gcc_4.9.3_mac_rpi">toolchain for RPi on MAC</a></h2><p>用法：</p>
<ol>
<li>直接解压 </li>
<li>加入环境变量<code>export PATH=$PATH:/Users/guomengyuan/Downloads/xc-gcc_4.9.3_mac_rpi-master/arm-rpi-linux-gnueabihf/bin</code></li>
<li>修改名称，将所有的arm-rpi-linux-xxx 改为arm-linux-xxx</li>
</ol>
<h2 id="gn构建ninja文件"><a href="#gn构建ninja文件" class="headerlink" title="gn构建ninja文件"></a>gn构建ninja文件</h2><p><code>gn gen out.gn/arm --args=&#39;is_debug=false is_component_build=true symbol_level=0 target_os=&quot;linux&quot; target_cpu=&quot;arm&quot; v8_target_cpu=&quot;arm&quot;&#39;</code></p>
<h2 id="编译-1"><a href="#编译-1" class="headerlink" title="编译"></a>编译</h2><p><code>ninja -C out.gn/arm</code></p>
<h1 id="v8引擎基本概念简述"><a href="#v8引擎基本概念简述" class="headerlink" title="v8引擎基本概念简述"></a>v8引擎基本概念简述</h1><h2 id="isolate"><a href="#isolate" class="headerlink" title="isolate"></a>isolate</h2><p>表示的一个独立的V8虚拟机，拥有自己的堆栈。所以才取名isolate，意为“隔离”。在v8中使用以下语法进行初始化：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Isolate* isolate = Isolate::New(create_params); </span><br></pre></td></tr></table></figure>
<h2 id="handle"><a href="#handle" class="headerlink" title="handle"></a>handle</h2><p>handle是指向对象的指针，在V8中，所有的对象都通过handle来引用，handle主要用于V8的垃圾回收机制。在 V8 中，handle 分为两种：持久化 (Persistent)handle 和本地 (Local)handle，持久化 handle 存放在堆上，而本地 handle 存放在栈上。比如我要使用本地句柄，句柄指向的内容是一个string，那么你要这么定义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Local&lt;String&gt; source = String::NewFromUtf8(isolate, &quot;&#x27;Hello&#x27; + &#x27;, World&#x27;&quot;, NewStringType::kNormal).ToLocalChecked();</span><br></pre></td></tr></table></figure>
<p>鉴于一个个释放Handle比较麻烦，v8又提供了HandleScope来批量处理，你可以在handle之前声明好：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HandleScope handle_scope(isolate);</span><br></pre></td></tr></table></figure>
<h2 id="context"><a href="#context" class="headerlink" title="context"></a>context</h2><p>context 是一个执行器环境，使用 context 可以将相互分离的 JavaScript 脚本在同一个 V8 实例中运行，而互不干涉。在运行 JavaScript 脚本是，需要显式的指定 context 对象。创建上下文，需要这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 创建一个上下文 </span><br><span class="line">Local&lt;Context&gt; context = Context::New(isolate); </span><br><span class="line">// 进入上下文编译和运行脚本 </span><br><span class="line">Context::Scope context_scope(context); </span><br></pre></td></tr></table></figure>
<h2 id="V8的数据类型"><a href="#V8的数据类型" class="headerlink" title="V8的数据类型"></a>V8的数据类型</h2><p>由于 C++ 原生数据类型与 JavaScript 中数据类型有很大差异，因此 V8 提供了 Data 类，从 JavaScript 到 C++，从 C++ 到 JavaScrpt 都会用到这个类及其子类，比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String::NewFromUtf8(info.GetIsolate(), &quot;version&quot;).ToLocalChecked() </span><br></pre></td></tr></table></figure>
<p>这里的String便是V8的数据类型。再比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v8::Integer::New(info.GetIsolate(), 10); </span><br></pre></td></tr></table></figure>
<h2 id="对象模板和函数模板"><a href="#对象模板和函数模板" class="headerlink" title="对象模板和函数模板"></a>对象模板和函数模板</h2><p>这两个模板类用以定义 JavaScript 对象和 JavaScript 函数。我们在后续的小节部分将会接触到模板类的实例。通过使用 ObjectTemplate，可以将 C++ 中的对象暴露给脚本环境，类似的，FunctionTemplate 用以将 C++ 函数暴露给脚本环境，以供脚本使用。</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wolfx/p/5920141.html">https://www.cnblogs.com/wolfx/p/5920141.html</a><br><a target="_blank" rel="noopener" href="https://juejin.im/post/5d91a4d4f265da5b5f756c22">https://juejin.im/post/5d91a4d4f265da5b5f756c22</a><br><a target="_blank" rel="noopener" href="https://gist.github.com/Jiab77/e59841227d1f9c7d2877862ced673ec6">https://gist.github.com/Jiab77/e59841227d1f9c7d2877862ced673ec6</a><br><a target="_blank" rel="noopener" href="https://github.com/google/shaka-packager/issues/763">https://github.com/google/shaka-packager/issues/763</a><br><a target="_blank" rel="noopener" href="https://groups.google.com/forum/#!topic/v8-users/LTppUbqNrzI">https://groups.google.com/forum/#!topic/v8-users/LTppUbqNrzI</a><br><a target="_blank" rel="noopener" href="https://www.douban.com/note/754801799/">豆瓣LLVM</a><br><a target="_blank" rel="noopener" href="https://github.com/abhiTronix/raspberry-pi-cross-compilers">rpi交叉编译工具</a><br><a target="_blank" rel="noopener" href="https://my.oschina.net/wolfcs/blog/726696">gn参数</a><br><a target="_blank" rel="noopener" href="http://blog.hszofficial.site/introduce/2018/02/22/%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8E%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91/">http://blog.hszofficial.site/introduce/2018/02/22/%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8E%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91/</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://8biiit.github.io/2020/05/29/%E5%B0%8F%E7%B1%B36%E5%88%B7Magisk%E5%85%A8%E6%B5%81%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="8Biiit">
      <meta itemprop="description" content="Everything from life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="8Biiit's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020/05/29/%E5%B0%8F%E7%B1%B36%E5%88%B7Magisk%E5%85%A8%E6%B5%81%E7%A8%8B/" class="post-title-link" itemprop="url">小米6刷Magisk全流程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2020-05-29 19:31:16 / 修改时间：19:47:54" itemprop="dateCreated datePublished" datetime="2020-05-29T19:31:16+08:00">2020-05-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="解锁bootloader"><a href="#解锁bootloader" class="headerlink" title="解锁bootloader"></a>解锁bootloader</h1><p>需要：sim卡 ，<a target="_blank" rel="noopener" href="http://www.miui.com/unlock/download.html">mi手机解锁工具</a></p>
<p>首先手机进入开发者模式（miui版本连击7次），进入解锁状态(需要sim卡联网)</p>
<p>绑定小米账号和设备(需验证码)，申请解锁设备</p>
<p>windows下载并运行mi手机解锁工具，登录小米账号</p>
<p>小米6手机关机后，同时长按音量“-”和电源，进入fastboot状态（界面出现一个兔子）</p>
<p>手机通过usb与电脑连接</p>
<p>点击解锁手机</p>
<p>解锁成功</p>
<h1 id="刷入第三方twrp-recovery"><a href="#刷入第三方twrp-recovery" class="headerlink" title="刷入第三方twrp recovery"></a>刷入第三方twrp recovery</h1><p>找到小米6对应的<a target="_blank" rel="noopener" href="https://twrp.me/xiaomi/xiaomimi6.html">twrp recovery版本</a>，下载到本地</p>
<p>手机打开usb调试</p>
<p>终端运行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#进入fastboot</span><br><span class="line">adb reboot bootloader</span><br><span class="line">#刷入img</span><br><span class="line">fastboot flash recovery twrp.img</span><br><span class="line">#重启</span><br><span class="line">fastboot reboot</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>进入recovery</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastboot boot twrp.img</span><br></pre></td></tr></table></figure>

<p>注意：有可能会进到自带的Mi recovery，这样就得重新刷。尽量重启后在进入小米的系统之前就进入twrp。</p>
<p>小米进recovery的按钮是同时按音量“+”和电源</p>
<h1 id="lt-可选：刷入lineage-gt"><a href="#lt-可选：刷入lineage-gt" class="headerlink" title="&lt;可选：刷入lineage &gt;"></a>&lt;可选：刷入lineage &gt;</h1><p>下载lineage 的<a target="_blank" rel="noopener" href="https://download.lineageos.org/">固件</a></p>
<p>进入 twrp recovery</p>
<p>把固件传入手机 <code>adb push lineage.zip /sdcard/</code></p>
<p>twrp 里install  固件（不选校验，选之后重启）</p>
<p>重启后如果有个绿色的弧线，说明进到lineage里了</p>
<h1 id="刷入Magisk"><a href="#刷入Magisk" class="headerlink" title="刷入Magisk"></a>刷入Magisk</h1><p>magisk push 到手机上，使用twrp安装。</p>
<p>重启后手机上出现magisk manager</p>
<p>若magisk manager一直显示要更新，可以把更新通道换为其他的：</p>
<p>进入”设置”，选择自定义通道输入这个链接:<br><a target="_blank" rel="noopener" href="https://qianyegroup.gitee.io/magiskbuilds/updates/custom.json">https://qianyegroup.gitee.io/magiskbuilds/updates/custom.json</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://8biiit.github.io/2019/10/10/iOS-with-Extension%E7%A0%B8%E5%A3%B3%E5%85%A8%E8%BF%87%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="8Biiit">
      <meta itemprop="description" content="Everything from life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="8Biiit's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/10/10/iOS-with-Extension%E7%A0%B8%E5%A3%B3%E5%85%A8%E8%BF%87%E7%A8%8B/" class="post-title-link" itemprop="url">iOS with Extension砸壳全过程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-10-10 21:20:16 / 修改时间：21:31:28" itemprop="dateCreated datePublished" datetime="2019-10-10T21:20:16+08:00">2019-10-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol>
<li>一部越狱的手机</li>
<li><a target="_blank" rel="noopener" href="https://github.com/stefanesser/dumpdecrypted">dumpdecrypted</a>或<a target="_blank" rel="noopener" href="https://github.com/AloneMonkey/frida-ios-dump">frida-ios-dump</a>(砸壳使用)</li>
<li>class-dump（导出砸壳后的二进制包的头文件）</li>
<li>Cycript(Cydia)（在越狱手机的越狱市场下载，安装）</li>
<li>OpenSSH(Cydia) （在越狱手机的越狱市场下载，安装）</li>
<li>Frida(Cydia) （在越狱手机的越狱市场下载，安装）</li>
</ol>
<h2 id="重要步骤"><a href="#重要步骤" class="headerlink" title="重要步骤"></a>重要步骤</h2><h3 id="在APPStore中下载正版的应用到手机上"><a href="#在APPStore中下载正版的应用到手机上" class="headerlink" title="在APPStore中下载正版的应用到手机上"></a>在APPStore中下载正版的应用到手机上</h3><p>以下以搜狗输入法为例（手机ios10.3.3   型号iphone 5c）</p>
<h3 id="ssh至手机，并查看路径"><a href="#ssh至手机，并查看路径" class="headerlink" title="ssh至手机，并查看路径"></a>ssh至手机，并查看路径</h3><p>转发手机22端口到主机2222端口 <code>iproxy 2222 22</code></p>
<p>ssh至手机 <code>ssh -p2222 root@127.0.0.1</code></p>
<p>查找 进程信息（此时app和extension都要打开）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps -e | grep Sogou </span><br><span class="line"></span><br><span class="line">cycript -p SogouInput</span><br></pre></td></tr></table></figure>

<h3 id="dumpdecrypted砸壳"><a href="#dumpdecrypted砸壳" class="headerlink" title="dumpdecrypted砸壳"></a>dumpdecrypted砸壳</h3><p>下载并编译dumpdecrypted  <code>cd dumpdecrypted &amp;&amp; make</code></p>
<p>为dumpdecrypted.dylib签名<br><code>codesign -fs &quot;iPhone Developer: my.guo@foxmail.com (WJ79M49LT4)&quot; dumpdecrypted.dylib</code></p>
<p>将dumpdecrypted.dylib拷贝到/usr/bin<br><code>sudo scp dumpdecrypted.dylib root@10.2.200.186:/usr/bin</code></p>
<p>执行以下命令为可执行文件砸壳</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DYLD_INSERT_LIBRARIES=dumpdecrypted.dylib     /var/containers/Bundle/Application/EFE80EA8-BF4D-49C9-A342-B22357CA1A93/SogouInput.app/SogouInput</span><br></pre></td></tr></table></figure>
<p>为extension砸壳</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DYLD_INSERT_LIBRARIES=dumpdecrypted.dylib     /var/containers/Bundle/Application/EFE80EA8-BF4D-49C9-A342-B22357CA1A93/SogouInput.app/PlugIns/com.sogou.sogouinput.BaseKeyboard.appex/com.sogou.sogouinput.BaseKeyboard</span><br></pre></td></tr></table></figure>

<p>结果会在执行目录下生成可执行文件.decrypted文件</p>
<p>将文件拷贝回电脑  <code>sudo scp root@127.0.0.1:/SogouInput.decrypted  ~/Desktop</code></p>
<h3 id="frida-ios-dump-砸壳"><a href="#frida-ios-dump-砸壳" class="headerlink" title="frida-ios-dump 砸壳"></a>frida-ios-dump 砸壳</h3><p>按照说明配置环境</p>
<p>修改dump.py 中的user等</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">User = &#x27;root&#x27;</span><br><span class="line">Password = &#x27;*****&#x27;</span><br><span class="line">Host = &#x27;localhost&#x27;</span><br><span class="line">Port = 2222</span><br></pre></td></tr></table></figure>
<p>开始砸壳</p>
<p><code>sudo ./dump.py com.sogou.sogouinput</code></p>
<h2 id="查看可执行文件是否成功砸壳"><a href="#查看可执行文件是否成功砸壳" class="headerlink" title="查看可执行文件是否成功砸壳"></a>查看可执行文件是否成功砸壳</h2><p><code>otool -l 可执行文件路径 | grep cryptid</code><br>结果为1加密了，0没有加密</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://8biiit.github.io/2019/09/20/Mac%E6%9B%B4%E6%96%B0bash%E8%87%B34-0%E4%BB%A5%E4%B8%8A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="8Biiit">
      <meta itemprop="description" content="Everything from life">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="8Biiit's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/09/20/Mac%E6%9B%B4%E6%96%B0bash%E8%87%B34-0%E4%BB%A5%E4%B8%8A/" class="post-title-link" itemprop="url">Mac更新bash至4.0以上</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-09-20 19:41:39 / 修改时间：19:50:51" itemprop="dateCreated datePublished" datetime="2019-09-20T19:41:39+08:00">2019-09-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/MacOS/" itemprop="url" rel="index"><span itemprop="name">MacOS</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Mac自带的bash为3.2版本，而最新的bash是5.0一上了。这导致bash无法支持新特性，而且执行脚本时也会提示bash要升级。</p>
<h3 id="升级方法"><a href="#升级方法" class="headerlink" title="升级方法"></a>升级方法</h3><p>查看bash版本<code> bash --version</code><br>执行<code>brew install bash</code></p>
<p>此时，bash虽然安装了，但是/bin/bash的版本依然没有改变。<br>这是因为mac系统禁止更改系统目录的权限，引入sip机制，需要先关闭，修改，再打开这一系列操作</p>
<h3 id="打开和关闭sip"><a href="#打开和关闭sip" class="headerlink" title="打开和关闭sip"></a>打开和关闭sip</h3><p>关闭sip</p>
<ol>
<li>重启系统，然后按住Command+R</li>
<li>出现界面之后，在最上方菜单栏选择Utilities menu中Terminal</li>
<li>在Terminal中输入csrutil disable关闭SIP</li>
<li>重启reboot </li>
</ol>
<h3 id="加入软链接"><a href="#加入软链接" class="headerlink" title="加入软链接"></a>加入软链接</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mv /bin/bash  /bin/bash.origin</span><br><span class="line">sudo ln -s /usr/local/bin/bash /bin/bash</span><br></pre></td></tr></table></figure>

<p>修改完成之后，查看版本是否更改。<br>更改后重新打开sip，打开时执行<code>csrutil enable </code></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">8Biiit</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/third-party/search/local-search.js"></script>




  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"8biiit","repo":"8biiit.github.io","client_id":"8c5e1f409f422d4e10f6","client_secret":"dd74067b3e311d6338eb117e3711361d6769df41","admin_user":"8biiit","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"d1546d731a9f30cc80127d57142a482b"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
